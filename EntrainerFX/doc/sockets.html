<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta http-equiv="Content-Language" content="en-us" />
	
<meta http-equiv="keywords" content="entrainer, java, sound, light, binaural beats, consciousness, entrainment">
<meta http-equiv="description" content="Entrainer Index Page">

<meta name="robots" content="index,follow" />

<title>EntrainerFX: Entrainer Sockets</title>

<link href="mac.css" rel="stylesheet" type="text/css" media="screen" />
<link href="print.css" rel="stylesheet" type="text/css" media="print" />

</head>

<body>
<div id="wrapper">

<div id="banner">
	<p>entrainer.sourceforge.net</p>
</div>

<div id="nav-toplevel">

	<div id="nav-meta">
		<ul title="Top Level Navigation bar">
			<li><a href="http://sourceforge.net/projects/entrainer" title="Sourceforge Project Page">Project Page</a></li>
			<li><a href="mailto:burton@users.sourceforge.net" title="Contact">Contact</a></li>
		</ul>
	</div>
  	
</div>

<div id="container">

	<div id="content">
   	
   	<h2>Entrainer Sockets (New in 3.0.0 Final)</h2>
    
   	<center><img alt="Entrainer Sockets" src="images/SocketMenu.jpg"/></center><br>
   	
   	<p>
   	Starting with version 3.0.0 of Entrainer an external interface has been added to the program.  The
   	purpose of this interface is to allow external programs and hardware to be made aware of the current
   	state of Entrainer, and to allow external programs and hardware to control Entrainer's state.  Clicking the
   	'Accept Connections' menu item will bind and unbind Entrainer to the host and port defined in its settings.
   	</p>
   	
   	<p>
   	The interface is communicated through <a href="http://en.wikipedia.org/wiki/Network_socket">sockets</a>, and
   	is an XML document. The specifics of the interface are located in the Javadoc and source for the class
   	<br><br><code>net.sourceforge.entrainer.socket.EntrainerStateMessage</code>.<br><br>
   	</p>
   	
   	<h3>JSON and WebSockets (New in 4.2.2 Final)</h3>
   	
   	<p>
   	Version 4.22 of EntrainerFX builds upon this functionality with two new features:
   	<ul>
	   	<li>Allowing both NIO (plain socket) connections and <a href="https://en.wikipedia.org/wiki/Websocket">WebSocket connections</a>.</li>
	   	<li>Communication in either XML form or <a href="https://en.wikipedia.org/wiki/Json">JSON</a> form for either type of connection.</li>
   	</ul>
   	</p>
   	
   	<p>
   	The purpose of WebSocket communication is to allow browser control of EntrainerFX.  A <a href="EntrainerWebsocket.html">simple</a>
   	example (EntrainerWebsocket.html) is included in the documentation.  Edit this file according to the host and port settings 
   	in EntrainerFX as described below and open in a modern browser.
   	</p>
   	
   	<p>
   	In order to obtain the current state of EntrainerFX a request must be sent upon successful connection and must be the first
   	message sent to EntrainerFX:
   	<p/>
   	
   	<h3>JSON Request State</h3>
   	<p>
   	{ "requestState" : true }
   	</p>
   	
   	<h3>XML Request State</h3>
   	<p>
   	&lt;entrainerStateMessage&gt;<br/>
   		&nbsp;&nbsp;&lt;requestState&gt;true&lt;/requestState&gt;<br/>
   	&lt;/entrainerStateMessage&gt;
   	</p>
   	
   	<h2>Choosing the Socket Host and Port</h2>
   	
   	<center><img alt="Choose Socket Port" src="images/ChooseSocketPort.jpg"/></center><br>
   	
   	<p>
   	Clicking the 'Choose Socket Port' menu item brings up the dialog to change the host, port and
   	whether Entrainer communicates only changes to its state, or its entire state should any part of the state
   	change.  When first invoked Entrainer makes a best-guess at the host ip address of the machine on which
   	it is running.  This can be overridden to be the host name or another IP address identifying the machine.
   	</p>
   	
   	<p>
   	The port setting defines on what port on the machine Entrainer creates its socket to accept external connections.
   	The value of this field should be > 1000 (many ports < 1000 are used by your computer ie. port 80 for http, 443 
   	for SSL etc) and must not be used by any other sockets on your machine.  Should it be used by another socket an
   	error will be generated on clicking the 'Accept Connections' menu item & another port will need to be set.
   	</p>
   	
   	<h2>The Connector GUI (NIO sockets using XML)</h2>
   	
   	<center><img alt="Connector GUI" src="images/SocketConnectorGui.jpg"/></center><br>
   	
   	<p>
   	Clicking the 'Show Connector GUI' menu item brings up an instance of the Connector GUI.  This 
   	frame mimics the behaviour of an external program connecting to Entrainer by receiving state change
   	events from Entrainer, and provides control for a subset of Entrainer's functionality.  It demonstrates 
   	Entrainer's socket functionality only and is not necessary for the normal use of Entrainer.
   	</p>
   	
   	<h2>The Connector GUI (WebSockets using JSON)</h2>
   	
   	<center><img alt="Web Socket Connector GUI" src="images/WebSocketConnectorGui.png"/></center><br>
   	
   	<p>
   	To use the Connector GUI Entrainer must be accepting connections on the host & port defined in the settings.
   	Clicking the 'Connect' button on the Connector GUI will cause the Connector GUI to establish the socket connection.  Entrainer,
   	on connection, sends its current state to the 'external' program.  The text area shows the messages received from
   	Entrainer.  Many instances of the Connector GUI can be created & connected to a single instance of Entrainer - 
   	Entrainer is capable of accepting multiple connections from external programs and hardware.
   	</p>
     	
	</div>
	
	<div id="nav-subs">
	
			<div id="nav-section">
	
				<ul title="Current Section Subsections">
					<li><a href="index.html" title="Index">Index</a></li>
					<li><a href="entrainerfx.html" title="Entrainer FX">Entrainer FX</a></li>
					<li><a href="installation.html" title="Installing Entrainer">Installing</a></li>
					<li><a href="running.html" title="Running Entrainer">Running</a></li>
					<li><a href="neuralizer.html" title="Neural Network Power Signal Analysis">Neural Network</a></li>
					<li><a href="sockets.html" title="Entrainer Sockets">Entrainer Sockets</a></li>
					<li><a href="animations.html" title="Entrainer Animations">Animations</a></li>
					<li><a href="recording.html" title="Recording with Entrainer">Recording</a></li>
					<li><a href="loading.html" class="current" title="Loading Entrainer Programs">Loading</a></li>
					<li><a href="editing.html" title="Editing Entrainer Programs">Editing</a></li>
					<li><a href="lookAndFeel.html" title="Dynamic Look and Feel">Look and Feel</a></li>
				</ul>
	
			</div>
			
			<div id="nav-supp">
			
				<ul title="Binaural Beat Links">
					<li><a href="http://en.wikipedia.org/wiki/Binaural_beats">Wikipedia - Binaural Beats</a></li>
					<li><a href="http://www.monroeinstitute.com/content.php?content_id=38">Binaural Beats</a></li>
					<li><a href="http://www.mindmodulations.com/mindmods/general/changing-your-brainwaves-using-auditory-binaural-beats-for-5.html">
					Changing Your Brainwaves Using Binaural Beats</a></li>
				</ul>
			
			</div>
			
	</div>
	
</div>
	
<div id="info-site">
  <p id="info-company"><a href="#">copyright Burton Alexander 2008 - 2015</a> | <a href="http://entrainer.sourceforge.net">Entrainer Home</a></p>
</div>

</div>
</body>
</html>
